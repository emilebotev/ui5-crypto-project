<mvc:View
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:t="sap.ui.table"
    controllerName="sap.ui5.crypto.controller.View"
    viewName="sap.ui5.crypto.view.Table"
    xmlns:u="sap.ui.unified"
    xmlns:core="sap.ui.core"
    height="100%"
    id="CryptoTableView"
>
    <t:Table
        id="cryptoTable"
        rows="{cryptoModel>/crypto}"
        rowMode="Auto"
        class="sapUiTinyPadding"
        selectionMode="None"
        enableBusyIndicator="true"
    >
        <t:columns>
            <t:Column
                id="MarketCapRank"
                sortProperty="market_cap_rank"
                showSortMenuEntry="true"
                width="4rem"
            >
                <Text
                    id="MarketCapRankText"
                    text="MC #"
                />
                <t:template>
                    <Text
                        id="CryptoMCRank"
                        text="{cryptoModel>market_cap_rank}"
                    />
                </t:template>
            </t:Column>
            <t:Column
                id="NameColumn"
                sortProperty="name"
                filterProperty="name"
                showFilterMenuEntry="true"
                showSortMenuEntry="true"
            >
                <Text
                    id="NameColumnText"
                    text="Name"
                />
                <t:template>
                    <HBox
                        alignContent="Center"
                        alignItems="Center"
                        id="LogoAndText"
                        columnGap="7px"
                    >
                        <Image
                            id="LogoSource"
                            src="{cryptoModel>image}"
                            width="17px"
                            height="17px"
                        />
                        <Text
                            id="CryptoName"
                            text="{cryptoModel>name}"
                        />
                    </HBox>
                </t:template>
            </t:Column>
            <t:Column
                id="PriceColumn"
                hAlign="End"
                sortProperty="current_price"
                showSortMenuEntry="true"
            >
                <Text
                    id="PriceColumnText"
                    text="Price (USD)"
                />
                <t:template>
                    <ObjectNumber
                        id="CryptoCurrentPriceText"
                        number="{parts: [{path: 'cryptoModel>current_price'}, { path: 'cryptoModel>/selectedCurrency' }], formatter: '.formatter.formatCurrency'}"
                        textAlign="End"
                    />
                </t:template>
            </t:Column>
            <t:Column
                id="PercentChangeColumn"
                hAlign="End"
                sortProperty="price_change_percentage_24h"
                showSortMenuEntry="true"
            >
                <Text
                    id="PercentChangeColumnText"
                    text="24h Change %"
                />
                <t:template>
                    <ObjectNumber
                        id="PercentageChangeCell"
                        number="{ parts:
                                    [
                                        {path:'cryptoModel>price_change_percentage_24h'},
                                        { path: 'cryptoModel>/selectedCurrency' }
                                    ], formatter: '.formatter.formatPercentage'}"
                        state="{= ${cryptoModel>price_change_percentage_24h} >= 0 ? 'Success': 'Error' }"
                        textAlign="End"
                    />
                </t:template>
            </t:Column>
            <t:Column
                id="MarketCapColumn"
                hAlign="End"
                showSortMenuEntry="true"
                sortProperty="market_cap"
            >
                <Text
                    id="MarketCapColumnText"
                    text="Market Cap"
                />
                <t:template>
                    <ObjectNumber
                        id="CryptoMarketCap"
                        number="{
                                        parts: 
                                            [
                                                {path: 'cryptoModel>market_cap'},
                                                { path: 'cryptoModel>/selectedCurrency' }
                                            ],
                                        formatter: '.formatter.formatCurrency' 
                                    }"
                        textAlign="End"
                    />
                </t:template>
            </t:Column>
        </t:columns>
    </t:Table>
</mvc:View>
