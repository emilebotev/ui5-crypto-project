<mvc:View
    controllerName="sap.ui5.crypto.controller.CryptoDetail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:viz.data="sap.viz.ui5.data"
    xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
    xmlns:core="sap.ui.core"
>
    <Page
        id="CryptoDetailPage"
        title="Crypto Chart"
    >
        <content>
            <VBox
                id="CryptoDetailVBox"
                class="sapUiSmallMargin"
            >
                <!-- TODO Set dynamic vizType after creating a dedicated CryptoDetail Model to hold this property -->
                <viz:VizFrame
                    id="cryptoDetailVizFrame"
                    width="100%"
                    height="500px"
                    uiConfig="{applicationSet: 'fiori'}"
                    vizType="timeseries_line"
                    vizProperties="{title: { text: 'Price Over Time' }}"
                    renderComplete=".onRenderComplete"
                >
                    <viz:dataset>
                        <viz.data:FlattenedDataset
                            id="cryptoDetailDataset"
                            data="{cryptoDetail>/cryptoDetail}"
                        >
                            <viz.data:dimensions>
                                <viz.data:DimensionDefinition
                                    id="cryptoDetailDimensionDate"
                                    name="Date"
                                    value="{date}"
                                    dataType="date"
                                />
                            </viz.data:dimensions>
                            <viz.data:measures>
                                <viz.data:MeasureDefinition
                                    id="cryptoDetailMeasurePrice"
                                    name="Price"
                                    value="{price}"
                                    format="usd"
                                />
                            </viz.data:measures>
                        </viz.data:FlattenedDataset>
                    </viz:dataset>
                    <viz:feeds>
                        <viz.feeds:FeedItem
                            id="cryptoDetailFeedTimeAxis"
                            uid="timeAxis"
                            type="Dimension"
                            values="Date"
                        />
                        <viz.feeds:FeedItem
                            id="cryptoDetailFeedValueAxis"
                            uid="valueAxis"
                            type="Measure"
                            values="Price"
                        />
                    </viz:feeds>
                </viz:VizFrame>

                <HBox
                    id="CryptoDetailHBox"
                    justifyContent="Start"
                >
                    <SegmentedButton
                        id="daysSelectionSegmentedButton"
                        selectedKey="{cryptoDetail>/selectedDays}"
                        selectionChange=".onSelectedDaysChange"
                    >
                        <items>
                            <SegmentedButtonItem
                                id="daysSelectionSegmentedButtonItem1"
                                key="1"
                                text="1 Day"
                                width="140px"
                            />
                            <SegmentedButtonItem
                                id="daysSelectionSegmentedButtonItem2"
                                key="7"
                                text="7 Days"
                                width="140px"
                            />
                            <SegmentedButtonItem
                                id="daysSelectionSegmentedButtonItem3"
                                key="30"
                                text="1 Month"
                                width="140px"
                            />
                            <SegmentedButtonItem
                                id="daysSelectionSegmentedButtonItem4"
                                key="180"
                                text="6 Months"
                                width="140px"
                            />
                            <SegmentedButtonItem
                                id="daysSelectionSegmentedButtonItem5"
                                key="365"
                                text="1 Year"
                                width="140px"
                            />
                        </items>
                    </SegmentedButton>
                </HBox>
                <MessageStrip
                    id="InfoMessageStripZoomInOut"
                    text="Tip: Use Ctrl + mouse wheel to zoom in/out the chart. Double-click to reset zoom."
                    type="Information"
                    showIcon="true"
                />
            </VBox>
        </content>
    </Page>
</mvc:View>
